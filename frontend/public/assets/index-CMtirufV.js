import{e as h,j as e,L as y,V as S,r as x,f as T,h as N,N as v,O as $,i as q,B}from"./react-vendor-BRvfdBlg.js";import{b as J,d as U,l as V,C as G,e as H,V as W,B as K}from"./vendor-C7-FBwRr.js";import{M as k,S as X,U as C,L as Y,a as z,X as E,b as Q,I as Z,c as I,d as P,e as A,E as O,f as R,g as F,C as ee,h as se}from"./icons-DszZx6Wq.js";import{E as te}from"./emoji-picker-C3viAzv7.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(l){if(l.ep)return;l.ep=!0;const r=s(l);fetch(l.href,r)}})();const j=J.create({baseURL:"/api",withCredentials:!0}),ae="/",p=U((t,a)=>({authUser:null,isSigningUp:!1,isLoggingIn:!1,isUpdatingProfile:!1,isCheckingAuth:!0,onlineUsers:[],socket:null,checkAuth:async()=>{try{const s=await j.get("/auth/check");t({authUser:s.data}),a().connectSocket()}catch(s){console.log("Error in checkAuth",s),t({authUser:null})}finally{t({isCheckingAuth:!1})}},signup:async s=>{t({isSigningUp:!0});try{const n=await j.post("/auth/signup",s);t({authUser:n.data}),h.success("Account created successfully"),a().connectSocket()}catch(n){h.error(n.response.data.message)}finally{t({isSigningUp:!1})}},login:async s=>{t({isLoggingIn:!0});try{const n=await j.post("/auth/login",s);t({authUser:n.data}),h.success("Logged in successfully"),a().connectSocket()}catch(n){h.error(n.response.data.message)}finally{t({isLoggingIn:!1})}},logout:async()=>{try{await j.post("/auth/logout"),t({authUser:null}),h.success("Logged out successfully"),a().disconnectSocket()}catch(s){h.error(s.response.data.message)}},updateProfile:async s=>{t({isUpdatingProfile:!0});try{const n=await j.put("/auth/update-profile",s);t({authUser:n.data}),h.success("Profile updated successfully")}catch(n){h.error(n.response.data.message)}finally{t({isUpdatingProfile:!1})}},connectSocket:()=>{var l;const{authUser:s}=a();if(!s||(l=a().socket)!=null&&l.connected)return;const n=V(ae,{query:{userId:s._id}});n.connect(),t({socket:n}),n.on("getOnlineUsers",r=>{t({onlineUsers:r})})},disconnectSocket:()=>{var s;(s=a().socket)!=null&&s.connected&&a().socket.disconnect()}})),ne=()=>{const{logout:t,authUser:a}=p();return e.jsx("header",{className:`bg-base-100 border-b border-base-300 fixed w-full top-0 z-40 
    backdrop-blur-lg bg-base-100/80`,children:e.jsx("div",{className:"container mx-auto px-4 h-16",children:e.jsxs("div",{className:"flex items-center justify-between h-full",children:[e.jsx("div",{className:"flex items-center gap-8",children:e.jsxs(y,{to:"/",className:"flex items-center gap-2.5 hover:opacity-80 transition-all",children:[e.jsx("div",{className:"size-9 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx(k,{className:"w-5 h-5 text-primary"})}),e.jsx("h1",{className:"text-lg font-bold",children:"Chatting & Snapping"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(y,{to:"/settings",className:`
              btn btn-sm gap-2 transition-colors
              
              `,children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Settings"})]}),a&&e.jsxs(e.Fragment,{children:[e.jsxs(y,{to:"/profile",className:"btn btn-sm gap-2",children:[e.jsx(C,{className:"size-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Profile"})]}),e.jsxs("button",{className:"flex gap-2 items-center",onClick:t,children:[e.jsx(Y,{className:"size-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})]})})})},w=U((t,a)=>({messages:[],users:[],selectedUser:null,isUsersLoading:!1,isMessagesLoading:!1,getUsers:async()=>{t({isUsersLoading:!0});try{const s=await j.get("/messages/users");t({users:s.data})}catch(s){S.error(s.response.data.message)}finally{t({isUsersLoading:!1})}},getMessages:async s=>{t({isMessagesLoading:!0});try{const n=await j.get(`/messages/${s}`);t({messages:n.data})}catch(n){S.error(n.response.data.message)}finally{t({isMessagesLoading:!1})}},sendMessage:async s=>{const{selectedUser:n,messages:l}=a();try{const r=await j.post(`/messages/send/${n._id}`,s);t({messages:[...l,r.data]})}catch(r){S.error(r.response.data.message)}},subscribeToMessages:()=>{const{selectedUser:s}=a();if(!s)return;p.getState().socket.on("newMessage",l=>{l.senderId===s._id&&t({messages:[...a().messages,l]})})},unsubscribeFromMessages:()=>{p.getState().socket.off("newMessage")},setSelectedUser:s=>t({selectedUser:s})})),le=()=>{const t=Array(8).fill(null);return e.jsxs("aside",{className:`h-full w-20 lg:w-72 border-r border-base-300 
    flex flex-col transition-all duration-200`,children:[e.jsx("div",{className:"border-b border-base-300 w-full p-5",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-6 h-6"}),e.jsx("span",{className:"font-medium hidden lg:block",children:"Contacts"})]})}),e.jsx("div",{className:"overflow-y-auto w-full py-3",children:t.map((a,s)=>e.jsxs("div",{className:"w-full p-3 flex items-center gap-3",children:[e.jsx("div",{className:"relative mx-auto lg:mx-0",children:e.jsx("div",{className:"skeleton size-12 rounded-full"})}),e.jsxs("div",{className:"hidden lg:block text-left min-w-0 flex-1",children:[e.jsx("div",{className:"skeleton h-4 w-32 mb-2"}),e.jsx("div",{className:"skeleton h-3 w-16"})]})]},s))})]})},re=()=>{const{getUsers:t,users:a,selectedUser:s,setSelectedUser:n,isUsersLoading:l}=w(),{onlineUsers:r}=p(),[i,o]=x.useState(!1);x.useEffect(()=>{t()},[t]);const c=i?a.filter(d=>r.includes(d._id)):a;return l?e.jsx(le,{}):e.jsxs("aside",{className:"h-full w-20 lg:w-72 border-r border-base-300 flex flex-col transition-all duration-200",children:[e.jsxs("div",{className:"border-b border-base-300 w-full p-5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"size-6"}),e.jsx("span",{className:"font-medium hidden lg:block",children:"Contacts"})]}),e.jsxs("div",{className:"mt-3 hidden lg:flex items-center gap-2",children:[e.jsxs("label",{className:"cursor-pointer flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:i,onChange:d=>o(d.target.checked),className:"checkbox checkbox-sm"}),e.jsx("span",{className:"text-sm",children:"Show online only"})]}),e.jsxs("span",{className:"text-xs text-zinc-500",children:["(",r.length-1," online)"]})]})]}),e.jsxs("div",{className:"overflow-y-auto w-full py-3",children:[c.map(d=>e.jsxs("button",{onClick:()=>n(d),className:`
              w-full p-3 flex items-center gap-3
              hover:bg-base-300 transition-colors
              ${(s==null?void 0:s._id)===d._id?"bg-base-300 ring-1 ring-base-300":""}
            `,children:[e.jsxs("div",{className:"relative mx-auto lg:mx-0",children:[e.jsx("img",{src:d.profilePic||"/avatar.png",alt:d.name,className:"size-12 object-cover rounded-full"}),r.includes(d._id)&&e.jsx("span",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full ring-2 ring-white"})]}),e.jsxs("div",{className:"hidden lg:block text-left min-w-0",children:[e.jsx("div",{className:"font-medium truncate",children:d.fullName}),e.jsx("div",{className:"text-sm text-zinc-400",children:r.includes(d._id)?"Online":"Offline"})]})]},d._id)),c.length===0&&e.jsx("div",{className:"text-center text-zinc-500 py-4",children:"No online users"})]})]})},ie=()=>e.jsx("div",{className:"w-full flex flex-1 flex-col items-center justify-center p-16 bg-base-100/50",children:e.jsxs("div",{className:"max-w-md text-center space-y-6",children:[e.jsx("div",{className:"flex justify-center gap-4 mb-4",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:`w-16 h-16 rounded-2xl bg-primary/10 flex items-center
             justify-center animate-bounce`,children:e.jsx(k,{className:"w-8 h-8 text-primary "})})})}),e.jsx("h2",{className:"text-2xl font-bold",children:"Welcome to Chatty!"}),e.jsx("p",{className:"text-base-content/60",children:"Select a conversation from the sidebar to start chatting"})]})});function ce(t){return new Date(t).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}const M=()=>{const[t,a]=x.useState(""),[s,n]=x.useState(null),[l,r]=x.useState(!1),i=x.useRef(null),{sendMessage:o}=w(),c=m=>{const u=m.target.files[0];if(!u.type.startsWith("image/")){S.error("Please select an image");return}const g=new FileReader;g.onloadend=()=>{n(g.result)},g.readAsDataURL(u)},d=()=>{n(null),i.current&&(i.current.value="")},f=async m=>{if(m.preventDefault(),!(!t.trim()&&!s))try{await o({text:t.trim(),image:s}),a(""),n(null),i.current&&(i.current.value="")}catch(u){console.error("Failed to send message:",u)}};return e.jsxs("div",{className:"p-4 w-full",children:[s&&e.jsx("div",{className:"mb-3 flex items-center gap-2",children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s,alt:"Preview",className:"w-20 h-20 object-cover rounded-lg border border-zinc-700"}),e.jsx("button",{onClick:d,className:`absolute -top-1.5 -right-1.5 w-5 h-5 rounded-full bg-base-300
              flex items-center justify-center`,type:"button",children:e.jsx(E,{className:"size-3"})})]})}),e.jsxs("form",{onSubmit:f,className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1 flex gap-2 relative",children:[e.jsx("button",{type:"button",className:`btn btn-circle text-zinc-400 ${l?"text-emerald-500":""}`,onClick:()=>r(m=>!m),children:e.jsx(Q,{size:20})}),l&&e.jsx("div",{className:"absolute bottom-12",children:e.jsx(te,{onEmojiClick:m=>{a(t+m.emoji),r(!1)}})}),e.jsx("input",{type:"text",className:"w-full input input-bordered rounded-lg input-sm sm:input-md",placeholder:"Type a message...",value:t,onChange:m=>a(m.target.value)}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:i,onChange:c}),e.jsx("button",{type:"button",className:`hidden sm:flex btn btn-circle
                     ${s?"text-emerald-500":"text-zinc-400"}`,onClick:()=>{var m;return(m=i.current)==null?void 0:m.click()},children:e.jsx(Z,{size:20})})]}),e.jsx("button",{type:"submit",className:"btn btn-sm btn-circle",disabled:!t.trim()&&!s,children:e.jsx(I,{size:22})})]})]})},L=()=>{const{selectedUser:t,setSelectedUser:a}=w(),{onlineUsers:s}=p();return e.jsx("div",{className:"p-2.5 border-b border-base-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"avatar",children:e.jsx("div",{className:"size-10 rounded-full relative",children:e.jsx("img",{src:t.profilePic||"/avatar.png",alt:t.fullName})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:t.fullName}),e.jsx("p",{className:"text-sm text-base-content/70",children:s.includes(t._id)?"Online":"Offline"})]})]}),e.jsx("button",{onClick:()=>a(null),children:e.jsx(E,{})})]})})},oe=()=>{const t=Array(6).fill(null);return e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:t.map((a,s)=>e.jsxs("div",{className:`chat ${s%2===0?"chat-start":"chat-end"}`,children:[e.jsx("div",{className:"chat-image avatar",children:e.jsx("div",{className:"size-10 rounded-full",children:e.jsx("div",{className:"skeleton w-full h-full rounded-full"})})}),e.jsx("div",{className:"chat-header mb-1",children:e.jsx("div",{className:"skeleton h-4 w-16"})}),e.jsx("div",{className:"chat-bubble bg-transparent p-0",children:e.jsx("div",{className:"skeleton h-16 w-[200px]"})})]},s))})},de=()=>{const{messages:t,getMessages:a,isMessagesLoading:s,selectedUser:n,subscribeToMessages:l,unsubscribeFromMessages:r}=w(),{authUser:i}=p(),o=x.useRef(null);return x.useEffect(()=>(a(n._id),l(),()=>r()),[n._id,a,l,r]),x.useEffect(()=>{o.current&&o.current.scrollIntoView({behavior:"smooth"})},[t]),s?e.jsxs("div",{className:"flex-1 flex flex-col overflow-auto",children:[e.jsx(L,{}),e.jsx(oe,{}),e.jsx(M,{})]}):e.jsxs("div",{className:"flex-1 flex flex-col overflow-auto",children:[e.jsx(L,{}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[t.map(c=>e.jsxs("div",{className:`chat ${c.senderId===i._id?"chat-end":"chat-start"}`,children:[e.jsx("div",{className:" chat-image avatar",children:e.jsx("div",{className:"size-10 rounded-full border",children:e.jsx("img",{src:c.senderId===i._id?i.profilePic||"/avatar.png":n.profilePic||"/avatar.png",alt:"profile pic"})})}),e.jsx("div",{className:"chat-header mb-1",children:e.jsx("time",{className:"text-xs opacity-50 ml-1",children:ce(c.createdAt)})}),e.jsxs("div",{className:"chat-bubble flex flex-col",children:[c.image&&e.jsx("img",{src:c.image,alt:"Attachment",className:"sm:max-w-[200px] rounded-md mb-2"}),c.text&&e.jsx("p",{children:c.text})]})]},c._id)),e.jsx("div",{ref:o})]}),e.jsx(M,{})]})},me=()=>{const{selectedUser:t}=w();return e.jsx("div",{className:"h-screen bg-base-200",children:e.jsx("div",{className:"flex items-center justify-center pt-20 px-4",children:e.jsx("div",{className:"bg-base-100 rounded-lg shadow-cl w-full max-w-6xl h-[calc(100vh-8rem)]",children:e.jsxs("div",{className:"flex h-full rounded-lg overflow-hidden",children:[e.jsx(re,{}),t?e.jsx(de,{}):e.jsx(ie,{})]})})})})},xe=()=>{const t=x.useRef(),a=x.useRef([]),s=x.useRef();a.current=[],H(({clock:l})=>{var i,o;const r=l.getElapsedTime();if(t.current&&(t.current.rotation.y=r*.5,t.current.rotation.x=Math.sin(r*.03)),a.current.forEach(({ref:c,basePos:d,phase:f})=>{if(c){const m=1+.12*Math.sin(r*2+f),u=d.clone().multiplyScalar(m);c.position.set(u.x,u.y,u.z)}}),s.current){const d=[];for(let m=0;m<a.current.length;m++){const u=(i=a.current[m].ref)==null?void 0:i.position;if(u)for(let g=m+1;g<a.current.length;g++){const b=(o=a.current[g].ref)==null?void 0:o.position;b&&u.distanceTo(b)<2&&d.push(u.clone(),b.clone())}}const f=new K().setFromPoints(d);s.current.geometry.dispose(),s.current.geometry=f}});const[n]=x.useState(()=>{const i=[];for(let o=0;o<180;o++){const c=Math.acos(1-2*(o+.5)/180),d=Math.PI*(1+Math.sqrt(5))*o,f=4*Math.sin(c)*Math.cos(d),m=4*Math.sin(c)*Math.sin(d),u=4*Math.cos(c),g=new W(f,m,u),b=Math.random()*Math.PI*2;i.push({basePos:g,phase:b})}return i});return e.jsxs("group",{ref:t,children:[n.map(({basePos:l,phase:r},i)=>e.jsxs("mesh",{ref:o=>a.current[i]={ref:o,basePos:l,phase:r},position:l,children:[e.jsx("sphereGeometry",{args:[.1,12,12]}),e.jsx("meshStandardMaterial",{color:"#3b82f6",emissive:"#1d4ed8",emissiveIntensity:.25})]},i)),e.jsx("lineSegments",{ref:s,children:e.jsx("lineBasicMaterial",{color:"#3b82f6",opacity:.25,transparent:!0})})]})},_=()=>e.jsx("div",{className:"w-full h-[500px]",children:e.jsxs(G,{camera:{position:[0,0,14],fov:50},children:[e.jsx("ambientLight",{intensity:.5}),e.jsx("pointLight",{position:[10,10,10]}),e.jsx(xe,{})]})}),ue=()=>{const[t,a]=x.useState(!1),[s,n]=x.useState({fullName:"",email:"",password:""}),{signup:l,isSigningUp:r}=p(),i=()=>s.fullName.trim()?s.email.trim()?/\S+@\S+\.\S+/.test(s.email)?s.password?s.password.length<6?h.error("Password should be at least 6 characters long"):!0:h.error("Password is required"):h.error("Email is invalid"):h.error("Email is required"):h.error("Full name is required"),o=c=>{c.preventDefault(),i()===!0&&l(s)};return e.jsxs("div",{className:"min-h-screen grid lg:grid-cols-2",children:[e.jsx("div",{className:"flex flex-col justify-center items-center p-6 sm:p-12",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-2 group",children:[e.jsx("div",{className:"size-12 rounded-xl bg-primary/10 flex items-center justify-center group-hover:bg-primary/20 transition-colors",children:e.jsx(k,{className:"size-6 text-primary"})}),e.jsx("h1",{className:"text-2xl font-bold mt-2",children:"Create Account"}),e.jsx("p",{className:"text-base-content/60",children:"Get started with your free account"})]})}),e.jsxs("form",{onSubmit:o,className:"space-y-6",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-medium",children:"Full Name"})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(C,{className:"size-5 text-base-content/40"})}),e.jsx("input",{type:"text",className:"input input-bordered w-full pl-10",placeholder:"John Doe",value:s.fullName,onChange:c=>n({...s,fullName:c.target.value})})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-medium",children:"Email"})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(P,{className:"size-5 text-base-content/40"})}),e.jsx("input",{type:"email",className:"input input-bordered w-full pl-10",placeholder:"you@example.com",value:s.email,onChange:c=>n({...s,email:c.target.value})})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-medium",children:"Password"})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(A,{className:"size-5 text-base-content/40"})}),e.jsx("input",{type:t?"text":"password",className:"input input-bordered w-full pl-10",placeholder:"••••••••",value:s.password,onChange:c=>n({...s,password:c.target.value})}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>a(!t),children:t?e.jsx(O,{className:"size-5 text-base-content/40"}):e.jsx(R,{className:"size-5 text-base-content/40"})})]})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-full",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"size-5 animate-spin"}),"Loading..."]}):"Create Account"})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-base-content/60",children:["Already have an account?"," ",e.jsx(y,{to:"/login",className:"link link-primary",children:"Sign in"})]})})]})}),e.jsx("div",{className:"hidden lg:flex flex-col items-center justify-center bg-base-200 p-12",children:e.jsxs("div",{className:"w-full max-w-lg text-center",children:[e.jsx(_,{title:"Join Our Community",subtitle:"Discover a world of engaging conversations and meaningful interactions."}),e.jsx("h2",{className:"text-2xl font-bold mt-6",children:"Join Our Community"}),e.jsx("p",{className:"text-base-content/60",children:"Discover a world of engaging conversations and meaningful interactions."})]})})]})},he=()=>{const[t,a]=x.useState(!1),[s,n]=x.useState({email:"",password:""}),{login:l,isLoggingIn:r}=p(),i=async o=>{o.preventDefault(),l(s)};return e.jsxs("div",{className:"h-screen grid lg:grid-cols-2",children:[e.jsx("div",{className:"flex flex-col justify-center items-center p-6 sm:p-12",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-2 group",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center group-hover:bg-primary/20
              transition-colors`,children:e.jsx(k,{className:"w-6 h-6 text-primary"})}),e.jsx("h1",{className:"text-2xl font-bold mt-2",children:"Welcome Back"}),e.jsx("p",{className:"text-base-content/60",children:"Sign in to your account"})]})}),e.jsxs("form",{onSubmit:i,className:"space-y-6",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-medium",children:"Email"})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(P,{className:"h-5 w-5 text-base-content/40"})}),e.jsx("input",{type:"email",className:"input input-bordered w-full pl-10",placeholder:"you@example.com",value:s.email,onChange:o=>n({...s,email:o.target.value})})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-medium",children:"Password"})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(A,{className:"h-5 w-5 text-base-content/40"})}),e.jsx("input",{type:t?"text":"password",className:"input input-bordered w-full pl-10",placeholder:"••••••••",value:s.password,onChange:o=>n({...s,password:o.target.value})}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>a(!t),children:t?e.jsx(O,{className:"h-5 w-5 text-base-content/40"}):e.jsx(R,{className:"h-5 w-5 text-base-content/40"})})]})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-full",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"h-5 w-5 animate-spin"}),"Loading..."]}):"Sign in"})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-base-content/60",children:["Don't have an account?"," ",e.jsx(y,{to:"/signup",className:"link link-primary",children:"Create account"})]})})]})}),e.jsx("div",{className:"hidden lg:flex flex-col items-center justify-center bg-base-200 p-12",children:e.jsxs("div",{className:"w-full max-w-lg text-center",children:[e.jsx(_,{title:"Join Our Community",subtitle:"Discover a world of engaging conversations and meaningful interactions."}),e.jsx("h2",{className:"text-2xl font-bold mt-6",children:"Join Our Community"}),e.jsx("p",{className:"text-base-content/60",children:"Discover a world of engaging conversations and meaningful interactions."})]})})]})},fe=["light","dark","cupcake","bumblebee","emerald","corporate","synthwave","retro","cyberpunk","valentine","halloween","garden","forest","aqua","lofi","pastel","fantasy","wireframe","black","luxury","dracula","cmyk","autumn","business","acid","lemonade","night","coffee","winter","dim","nord","sunset"],D=U(t=>({theme:localStorage.getItem("theme")||"retro",setTheme:a=>{localStorage.setItem("theme",a),t({theme:a})}})),pe=[{id:1,content:"Hey! How's it going?",isSent:!1},{id:2,content:"I'm doing great! Just working on some new features.",isSent:!0}],ge=()=>{const{theme:t,setTheme:a}=D();return e.jsx("div",{className:"h-screen container mx-auto px-4 pt-20 max-w-5xl",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Theme"}),e.jsx("p",{className:"text-sm text-base-content/70",children:"Choose a theme for your chat interface"})]}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 gap-2",children:fe.map(s=>e.jsxs("button",{className:`
                group flex flex-col items-center gap-1.5 p-2 rounded-lg transition-colors
                ${t===s?"bg-base-200":"hover:bg-base-200/50"}
              `,onClick:()=>a(s),children:[e.jsx("div",{className:"relative h-8 w-full rounded-md overflow-hidden","data-theme":s,children:e.jsxs("div",{className:"absolute inset-0 grid grid-cols-4 gap-px p-1",children:[e.jsx("div",{className:"rounded bg-primary"}),e.jsx("div",{className:"rounded bg-secondary"}),e.jsx("div",{className:"rounded bg-accent"}),e.jsx("div",{className:"rounded bg-neutral"})]})}),e.jsx("span",{className:"text-[11px] font-medium truncate w-full text-center",children:s.charAt(0).toUpperCase()+s.slice(1)})]},s))}),e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Preview"}),e.jsx("div",{className:"rounded-xl border border-base-300 overflow-hidden bg-base-100 shadow-lg",children:e.jsx("div",{className:"p-4 bg-base-200",children:e.jsx("div",{className:"max-w-lg mx-auto",children:e.jsxs("div",{className:"bg-base-100 rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 border-b border-base-300 bg-base-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary flex items-center justify-center text-primary-content font-medium",children:"J"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-sm",children:"John Doe"}),e.jsx("p",{className:"text-xs text-base-content/70",children:"Online"})]})]})}),e.jsx("div",{className:"p-4 space-y-4 min-h-[200px] max-h-[200px] overflow-y-auto bg-base-100",children:pe.map(s=>e.jsx("div",{className:`flex ${s.isSent?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`
                          max-w-[80%] rounded-xl p-3 shadow-sm
                          ${s.isSent?"bg-primary text-primary-content":"bg-base-200"}
                        `,children:[e.jsx("p",{className:"text-sm",children:s.content}),e.jsx("p",{className:`
                            text-[10px] mt-1.5
                            ${s.isSent?"text-primary-content/70":"text-base-content/70"}
                          `,children:"12:00 PM"})]})},s.id))}),e.jsx("div",{className:"p-4 border-t border-base-300 bg-base-100",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",className:"input input-bordered flex-1 text-sm h-10",placeholder:"Type a message...",value:"This is a preview",readOnly:!0}),e.jsx("button",{className:"btn btn-primary h-10 min-h-0",children:e.jsx(I,{size:18})})]})})]})})})})]})})},je=()=>{var i;const{authUser:t,isUpdatingProfile:a,updateProfile:s}=p(),[n,l]=x.useState(null),r=async o=>{const c=o.target.files[0];if(!c)return;const d=new FileReader;d.readAsDataURL(c),d.onload=async()=>{const f=d.result;l(f),await s({profilePic:f})}};return e.jsx("div",{className:"h-screen pt-20",children:e.jsx("div",{className:"max-w-2xl mx-auto p-4 py-8",children:e.jsxs("div",{className:"bg-base-300 rounded-xl p-6 space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-semibold ",children:"Profile"}),e.jsx("p",{className:"mt-2",children:"Your profile information"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:n||t.profilePic||"/avatar.png",alt:"Profile",className:" size-32 rounded-full object-cover border-4 "}),e.jsxs("label",{htmlFor:"avatar-upload",className:`
                  absolute bottom-0 right-0 
                  bg-base-content hover:scale-105
                  p-2 rounded-full cursor-pointer 
                  transition-all duration-200
                  ${a?"animate-pulse pointer-events-none":""}
                `,children:[e.jsx(ee,{className:"w-5 h-5 text-base-200"}),e.jsx("input",{type:"file",id:"avatar-upload",className:"hidden",accept:"image/*",onChange:r,disabled:a})]})]}),e.jsx("p",{className:"text-sm text-zinc-400",children:a?"Uploading...":"Click the camera icon to update your photo"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"text-sm text-zinc-400 flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4"}),"Full Name"]}),e.jsx("p",{className:"px-4 py-2.5 bg-base-200 rounded-lg border",children:t==null?void 0:t.fullName})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"text-sm text-zinc-400 flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4"}),"Email Address"]}),e.jsx("p",{className:"px-4 py-2.5 bg-base-200 rounded-lg border",children:t==null?void 0:t.email})]})]}),e.jsxs("div",{className:"mt-6 bg-base-300 rounded-xl p-6",children:[e.jsx("h2",{className:"text-lg font-medium  mb-4",children:"Account Information"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-zinc-700",children:[e.jsx("span",{children:"Member Since"}),e.jsx("span",{children:(i=t.createdAt)==null?void 0:i.split("T")[0]})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{children:"Account Status"}),e.jsx("span",{className:"text-green-500",children:"Active"})]})]})]})]})})})},be=()=>{const{authUser:t,checkAuth:a,isCheckingAuth:s,onlineUsers:n}=p(),{theme:l}=D();return console.log({onlineUsers:n}),x.useEffect(()=>{a()},[a]),console.log({authUser:t}),s&&!t?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(se,{className:"animate-spin"})}):e.jsxs("div",{"data-theme":l,children:[e.jsx(ne,{}),e.jsxs(T,{children:[e.jsx(N,{path:"/",element:t?e.jsx(me,{}):e.jsx(v,{to:"/login"})}),e.jsx(N,{path:"/signup",element:t?e.jsx(v,{to:"/"}):e.jsx(ue,{})}),e.jsx(N,{path:"/login",element:t?e.jsx(v,{to:"/"}):e.jsx(he,{})}),e.jsx(N,{path:"/settings",element:t?e.jsx(ge,{}):e.jsx(v,{to:"/login"})}),e.jsx(N,{path:"/profile",element:t?e.jsx(je,{}):e.jsx(v,{to:"/login"})})]}),e.jsx($,{})]})};q.createRoot(document.getElementById("root")).render(e.jsx(x.StrictMode,{children:e.jsx(B,{children:e.jsx(be,{})})}));
